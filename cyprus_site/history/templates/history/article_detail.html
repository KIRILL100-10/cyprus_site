{% extends 'base.html' %}
{% load static %}


{% block title %}{{ article.title }} ‚Äî Cyprus History{% endblock %}

{% block content %}
<section class="container" style="max-width:800px; margin:50px auto; text-align:center;">
    <div class="center-card">
        {% if article.image %}
            <img src="{{ article.image.url }}" alt="{{ article.title }}" style="max-width:100%; border-radius:10px; margin-bottom:20px;">
        {% endif %}

        <h1 style="margin-bottom:15px; color:#0078a8;">{{ article.title }}</h1>

        {% if article.category %}
            <p style="margin-bottom:10px;">Category:
                <a href="{% url 'history:article_category' article.category.slug %}" style="color:#0078a8;">
                    {{ article.category.name }}
                </a>
            </p>
        {% endif %}

        <p style="font-size:0.9em; color:#666; margin-bottom:25px;">
            Published on {{ article.created_at|date:"F j, Y" }}
        </p>

        <article style="text-align:justify; line-height:1.7; color:#333; font-size:1.05em;">
            {{ article.content|linebreaks }}
        </article>

        <div style="margin-top:40px;">
            <a href="{% url 'history:article_list' %}" class="btn btn-secondary">‚Üê Back to articles</a>
        </div>
    </div>
</section>

<section class="container" style="max-width:800px; margin:40px auto;">
    <div class="center-card" style="text-align:left;">
        <h2 style="color:#0078a8; margin-bottom:20px;">üí¨ Comments</h2>

        {% if comments %}
            {% for comment in comments %}
                <div style="border-bottom:1px solid #eee; padding:15px 0;">
                    <p><strong>{{ comment.author }}</strong> <span style="color:#888;">‚Äî {{ comment.created_at|date:"F j, Y, H:i" }}</span></p>
                    <p>{{ comment.text|linebreaks }}</p>

                    {% if user == comment.author %}
                        <div style="margin-top:10px;">
                            <a href="{% url 'history:comment_update' comment.id %}?article_slug={{ article.slug }}" class="btn btn-warning btn-sm">Edit</a>
                            <a href="{% url 'history:comment_delete' comment.id %}?article_slug={{ article.slug }}" class="btn btn-danger btn-sm">Delete</a>
                        </div>
                    {% endif %}
                </div>
            {% endfor %}
        {% else %}
            <p>No comments yet. Be the first to comment!</p>
        {% endif %}
    </div>

    <div class="center-card" style="margin-top:30px;">
    <h3 style="color:#0078a8; margin-bottom:15px;">Add a Comment</h3>
    <a href="{% url 'history:create_comment' article.slug %}" class="btn btn-success">Add Comment</a>
</div>
</section>
{% endblock %}
