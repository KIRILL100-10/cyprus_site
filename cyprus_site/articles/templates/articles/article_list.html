{% extends 'base.html' %}
{% load static %}
{% block title %}History â€” Cyprus ğŸŒ{% endblock %}

{% block content %}
<section class="container" style="text-align:center; margin-top:40px;">
    <h1 style="margin-bottom:30px; color:#0078a8;">ğŸ“š Historical Articles</h1>

    <div style="margin-bottom:20px;">
        <a href="{% url 'articles:article_search' %}" class="btn btn-primary">ğŸ” Search Articles</a>
    </div>

    <div class="categories" style="margin-bottom:30px;">
        <h3 style="margin-bottom:10px;">Categories</h3>
        <ul class="nav-links" style="flex-wrap: wrap; justify-content:center;">
            {% for category in categories %}
                <li><a href="{% url 'articles:article_category' category.slug %}">{{ category.name }} ({{ category.total }})</a></li>
            {% empty %}
                <li>No categories available.</li>
            {% endfor %}
        </ul>
    </div>

    <div class="cards" style="justify-content:center;">
        {% for article in articles %}
            <div class="card" style="text-align:left;">
                {% if article.image %}
                    <img src="{{ article.image.url }}" alt="{{ article.title }}">
                {% else %}
                    <img src="{% static 'images/default.jpg' %}" alt="No image">
                {% endif %}
                <h3 style="color:#0078a8; text-align:center;">{{ article.title }}</h3>
                <p style="text-align:justify; color:#444;">{{ article.content|truncatewords:25 }}</p>
                <div style="text-align:center;">
                    <a href="{% url 'articles:article_detail' article.slug %}" class="btn btn-info">Read more</a>
                </div>
            </div>
        {% empty %}
            <p>No articles found.</p>
        {% endfor %}
    </div>

    {% if is_paginated %}
    <div class="pagination" style="margin-top:40px;">
        {% if page_obj.has_previous %}
            <a class="btn btn-light" href="?page={{ page_obj.previous_page_number }}">â† Previous</a>
        {% endif %}

        <span style="margin:0 15px;">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>

        {% if page_obj.has_next %}
            <a class="btn btn-light" href="?page={{ page_obj.next_page_number }}">Next â†’</a>
        {% endif %}
    </div>
    {% endif %}
</section>
{% endblock %}
