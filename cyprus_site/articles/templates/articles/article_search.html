{% extends 'base.html' %}
{% load static %}


{% block title %}Search ‚Äî Cyprus History{% endblock %}

{% block content %}
<section class="container" style="text-align:center; margin-top:40px;">
    <h1 style="color:#0078a8;">üîç Search Articles</h1>

    <form method="get" action="{% url 'articles:article_search' %}" style="margin:25px 0;">
        <input type="text" name="q" placeholder="Enter your search..."
               value="{{ query }}"
               style="padding:10px 15px; width:60%; max-width:400px; border:1px solid #ccc; border-radius:6px;">
        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    {% if query %}
        <h3 style="margin-bottom:30px;">Results for "<strong>{{ query }}</strong>": {{ articles|length }}</h3>
    {% endif %}

    <div class="cards" style="justify-content:center;">
        {% for article in articles %}
            <div class="card" style="text-align:left;">
                {% if article.image %}
                    <img src="{{ article.image.url }}" alt="{{ article.title }}">
                {% else %}
                    <img src="{% static 'images/default.jpg' %}" alt="No image">
                {% endif %}
                <h3 style="color:#0078a8; text-align: center;">{{ article.title }}</h3>
                <p style="text-align:justify; color:#444;">{{ article.content|truncatewords:25 }}</p>
                <div style="text-align:center;">
                    <a href="{% url 'articles:article_detail' article.slug %}" class="btn btn-info">Read more</a>
                </div>
            </div>
        {% empty %}
            <p>No articles found.</p>
        {% endfor %}
    </div>

    {% if is_paginated %}
    <div class="pagination" style="margin-top:40px;">
        {% if page_obj.has_previous %}
            <a class="btn btn-light" href="?q={{ query }}&page={{ page_obj.previous_page_number }}">‚Üê Previous</a>
        {% endif %}

        <span style="margin:0 15px;">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>

        {% if page_obj.has_next %}
            <a class="btn btn-light" href="?q={{ query }}&page={{ page_obj.next_page_number }}">Next ‚Üí</a>
        {% endif %}
    </div>
    {% endif %}
    <div style="margin-top:30px; text-align:center;">
        <a href="{% url 'articles:article_list' %}" class="btn btn-secondary">‚Üê Back to All Articles</a>
    </div>
</section>
{% endblock %}
